# karpov-task
# Задача: Создание сервиса для обработки текстов

В рамках этой задачи вы будете пошагово разрабатывать сервис для обработки текстов с использованием методов NLP. Цель проекта - создать простой сервис на основе Streamlit, который принимает текстовый запрос от пользователя и обрабатывает его на основе предварительно построенного индекса текстов. 

## Основные шаги:

1. **Парсинг текстов**
    - Задача: Написать скрипт для загрузки и парсинга текстов из различных источников (например, текстовые файлы).
    - Результат: Файлы в формате `.txt` будут обработаны, текст будет извлечён и сохранён для дальнейшей работы.
    
2. **Чанкование текстов**
    - Задача: Разделить длинные тексты на небольшие логические куски (чанки).
    - Результат: Каждая длинная статья/текст будет разбита на небольшие части фиксированного размера (например, 500 слов) для удобства обработки.

3. **Создание эмбеддингов и сохранение индекса**
    - Задача: Использовать модель для генерации эмбеддингов (например, Sentence Transformers) и сохранить индекс для поиска.
    - Результат: Индексный файл с эмбеддингами, который будет использоваться для поиска по текстам.

4. **Обработка пользовательского запроса**
    - Задача: Реализовать функцию обработки запросов от пользователя, находить наиболее релевантные чанки текста с использованием индекса.
    - Результат: На основе пользовательского запроса будут возвращены наиболее релевантные части текстов.

5. **Создание Streamlit-сервиса**
    - Задача: Написать интерфейс на Streamlit для взаимодействия с пользователем.
    - Результат: Веб-приложение, которое позволяет загружать тексты, обрабатывать запросы и получать ответы.

## Структура проекта:
```
text_processing_service/
├── README.md                # Описание проекта и шагов
├── Makefile                 # Команды для установки окружения и запуска тестов
├── requirements.txt         # Список зависимостей
├── steps/                   # Папка с решениями задач
│   ├── 1_parse_texts.py     # Скрипт для парсинга текстов
│   ├── 2_chunk_texts.py     # Скрипт для чанкования текстов
│   ├── 3_create_embeddings.py  # Скрипт для создания эмбеддингов и индекса
│   ├── 4_process_query.py   # Скрипт для обработки запросов
│   └── 5_streamlit_app.py   # Скрипт для Streamlit приложения
├── tests/                   # Папка с тестами
│   ├── test_parse_texts.py
│   ├── test_chunk_texts.py
│   ├── test_create_embeddings.py
│   ├── test_process_query.py
│   └── test_streamlit_app.py
└── data/                    # Папка для хранения данных
```

## Инструкция по загрузке на GitHub

1. **Создание репозитория**
    - Зайдите на GitHub и создайте новый репозиторий с названием `text_processing_service`.

2. **Подготовка локального проекта**
    - Склонируйте репозиторий на ваш компьютер:
      ```bash
      git clone https://github.com/<ваш-логин>/text_processing_service.git
      ```
    - Перейдите в папку проекта:
      ```bash
      cd text_processing_service
      ```

3. **Добавление файлов проекта**
    - Создайте структуру проекта, описанную выше, используя команды терминала или файловый менеджер.
    - Скопируйте файлы шагов, тестов и другие элементы проекта в соответствующие папки.

4. **Инициализация и добавление зависимостей**
    - Создайте файл `requirements.txt` и добавьте все необходимые библиотеки (например, `streamlit`, `sentence-transformers`, `pytest`):
      ```text
      streamlit
      sentence-transformers
      pytest
      ```
    - Создайте файл `Makefile` для автоматизации задач (пример содержимого указан выше).

5. **Написание README**
    - Создайте файл `README.md` в корне проекта и скопируйте туда текст задачи из этого документа.

6. **Добавление файлов в репозиторий**
    - Выполните команды:
      ```bash
      git add .
      git commit -m "Initial project setup"
      git push origin main
      ```

7. **Проверка и тестирование**
    - Убедитесь, что проект загружен корректно, и протестируйте его на локальной машине. Убедитесь, что все тесты из папки `tests/` успешно выполняются:
      ```bash
      make test
      ```

8. **Создание веток для доработок (опционально)**
    - Для каждой доработки или исправления создавайте отдельную ветку:
      ```bash
      git checkout -b feature/<название-ветки>
      ```
    - После внесения изменений создавайте pull request через интерфейс GitHub.

## Эталонные решения и тесты
Для каждого шага предоставлены примеры решений и соответствующие тесты. Все тесты должны быть написаны с использованием `pytest` и покрывать основные случаи работы скриптов.

### Установка и запуск
1. Установите зависимости:
    ```bash
    make install
    ```

2. Запустите тесты, чтобы проверить работоспособность кода:
    ```bash
    make test
    ```

3. Запустите Streamlit-приложение:
    ```bash
    streamlit run steps/5_streamlit_app.py
    ```

### Пример Makefile
```makefile
install:
	pip install -r requirements.txt

test:
	pytest tests/
```
